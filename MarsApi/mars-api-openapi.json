{
    "openapi": "3.0.0",
    "info": {
        "title": "MARS API V1",
        "version": "1.0",
        "description": "Mars accommodation management API",
        "contact": {
            "url": "https://www.neolab.hr/en/contact",
            "email": "info@neolab.hr",
            "name": "Neolab API Support"
        }
    },
    "servers": [
        {
            "url": "https://yourMarsDomain",
            "description": "Production Server (Replace with your Mars domain)"
        },
        {
            "url": "https://stoplight.io/mocks/marsapi/mars-api-v1/73778095",
            "description": "Mock Server"
        }
    ],
    "security": [
        {
            "basicAuth": []
        }
    ],
    "paths": {
        "/mapi/v1/objects/index": {
            "get": {
                "summary": "Index service - Get all accommodations",
                "description": "Returns list of all accommodation IDs with last modified timestamps",
                "operationId": "getAccommodationIndex",
                "tags": [
                    "Accommodations"
                ],
                "parameters": [
                    {
                        "name": "responseType",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "json",
                                "xml"
                            ],
                            "default": "json"
                        },
                        "description": "Response format"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/IndexResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request"
                    },
                    "401": {
                        "description": "Unauthorized"
                    }
                }
            }
        },
        "/mapi/v1/objects/details": {
            "get": {
                "summary": "Details service - Get accommodation details",
                "description": "Returns complete accommodation details including units, pricing, and amenities",
                "operationId": "getAccommodationDetails",
                "tags": [
                    "Accommodations"
                ],
                "parameters": [
                    {
                        "name": "id",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "example": 41
                        },
                        "description": "Accommodation ID"
                    },
                    {
                        "name": "responseType",
                        "in": "query",
                        "schema": {
                            "type": "string",
                            "enum": [
                                "json",
                                "xml"
                            ],
                            "default": "json"
                        },
                        "description": "Response format"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/DetailsResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request"
                    },
                    "401": {
                        "description": "Unauthorized"
                    },
                    "404": {
                        "description": "Accommodation not found"
                    }
                }
            }
        }
    },
    "components": {
        "securitySchemes": {
            "basicAuth": {
                "type": "http",
                "scheme": "basic",
                "description": "HTTP Basic Authentication with username and password"
            }
        },
        "schemas": {
            "IndexResponse": {
                "type": "object",
                "properties": {
                    "status": {
                        "type": "boolean"
                    },
                    "messages": {
                        "type": "array",
                        "items": {
                            "type": "object"
                        }
                    },
                    "data": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/AccommodationIndex"
                        }
                    }
                }
            },
            "AccommodationIndex": {
                "type": "object",
                "properties": {
                    "object": {
                        "type": "object",
                        "properties": {
                            "id": {
                                "type": "integer",
                                "example": 41
                            },
                            "last_modified": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2020-06-19 10:43:05"
                            }
                        }
                    }
                }
            },
            "DetailsResponse": {
                "type": "object",
                "properties": {
                    "status": {
                        "type": "boolean"
                    },
                    "messages": {
                        "type": "array",
                        "items": {
                            "type": "object"
                        }
                    },
                    "data": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Accommodation"
                        }
                    }
                }
            },
            "Accommodation": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string",
                        "example": "API showcase"
                    },
                    "id": {
                        "type": "integer",
                        "example": 119
                    },
                    "location": {
                        "$ref": "#/components/schemas/Location"
                    },
                    "images": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Image"
                        }
                    },
                    "amenities": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Amenity"
                        }
                    },
                    "units": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Unit"
                        }
                    },
                    "commonItems": {
                        "$ref": "#/components/schemas/CommonItems"
                    }
                }
            },
            "Location": {
                "type": "object",
                "properties": {
                    "address": {
                        "type": "string",
                        "example": "Anticova 9"
                    },
                    "lat": {
                        "type": "number",
                        "format": "double",
                        "example": 44.8677674
                    },
                    "lng": {
                        "type": "number",
                        "format": "double",
                        "example": 13.8463567
                    },
                    "place": {
                        "type": "string",
                        "example": "Pula"
                    }
                }
            },
            "Image": {
                "type": "object",
                "properties": {
                    "big": {
                        "type": "string",
                        "format": "uri",
                        "example": "https://mars.neolab.hr/data/objects/images/26698/adventure-usdqef-l-kgwyz7.jpg"
                    }
                }
            },
            "Amenity": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string",
                        "example": "numberOfRooms"
                    },
                    "values": {
                        "oneOf": [
                            {
                                "type": "boolean"
                            },
                            {
                                "type": "integer"
                            },
                            {
                                "type": "string"
                            }
                        ],
                        "example": 1
                    }
                }
            },
            "Unit": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 56948
                    },
                    "name": {
                        "type": "string",
                        "example": "API unit showcase"
                    },
                    "type": {
                        "type": "string",
                        "example": "room"
                    },
                    "baseService": {
                        "type": "string",
                        "nullable": true,
                        "enum": [
                            "classic",
                            "junior",
                            "superior",
                            "executive",
                            "business",
                            "standard",
                            "comfort",
                            "deluxe",
                            "presidentialSuite",
                            "premium",
                            "duplex",
                            "mezzanin",
                            "family"
                        ]
                    },
                    "basicBeds": {
                        "type": "integer",
                        "example": 3
                    },
                    "extraBeds": {
                        "type": "integer",
                        "example": 5
                    },
                    "minOccupancy": {
                        "type": "integer",
                        "example": 2
                    },
                    "images": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Image"
                        }
                    },
                    "amenities": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/UnitAmenityGroup"
                        }
                    },
                    "availabilities": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Availability"
                        }
                    },
                    "pricelist": {
                        "$ref": "#/components/schemas/Pricelist"
                    }
                }
            },
            "UnitAmenityGroup": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string",
                        "example": "GENERAL"
                    },
                    "amenities": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Amenity"
                        }
                    }
                }
            },
            "Availability": {
                "type": "object",
                "properties": {
                    "dateFrom": {
                        "type": "string",
                        "format": "date",
                        "example": "2022-01-01"
                    },
                    "dateTo": {
                        "type": "string",
                        "format": "date",
                        "example": "2024-01-01"
                    },
                    "type": {
                        "type": "string",
                        "example": "Instant booking"
                    },
                    "validUntil": {
                        "type": "string",
                        "format": "date",
                        "nullable": true
                    },
                    "quantity": {
                        "type": "integer",
                        "example": 3
                    }
                }
            },
            "Pricelist": {
                "type": "object",
                "properties": {
                    "baseRate": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/PricelistItem"
                        }
                    },
                    "supplement": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/PricelistItem"
                        }
                    },
                    "discount": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/PricelistItem"
                        }
                    },
                    "touristTax": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/PricelistItem"
                        }
                    }
                }
            },
            "PricelistItem": {
                "type": "object",
                "properties": {
                    "dateFrom": {
                        "type": "string",
                        "format": "date",
                        "example": "2022-07-11"
                    },
                    "dateTo": {
                        "type": "string",
                        "format": "date",
                        "example": "2022-07-22"
                    },
                    "price": {
                        "type": "number",
                        "format": "double",
                        "nullable": true,
                        "example": 100
                    },
                    "currency": {
                        "type": "string",
                        "example": "EUR"
                    },
                    "percent": {
                        "type": "number",
                        "nullable": true,
                        "example": 30
                    },
                    "arrivalDays": {
                        "type": "string",
                        "nullable": true,
                        "example": "1,2,3,4,5"
                    },
                    "departureDays": {
                        "type": "string",
                        "nullable": true,
                        "example": "6,7"
                    },
                    "ageFrom": {
                        "type": "integer",
                        "nullable": true
                    },
                    "ageTo": {
                        "type": "integer",
                        "nullable": true
                    },
                    "minAdult": {
                        "type": "integer",
                        "nullable": true
                    },
                    "minChild": {
                        "type": "integer",
                        "nullable": true
                    },
                    "maxAdult": {
                        "type": "integer",
                        "nullable": true
                    },
                    "validFrom": {
                        "type": "string",
                        "format": "date",
                        "nullable": true
                    },
                    "validUntil": {
                        "type": "string",
                        "format": "date",
                        "nullable": true
                    },
                    "minStay": {
                        "type": "integer",
                        "example": 5
                    },
                    "maxStay": {
                        "type": "integer",
                        "nullable": true,
                        "example": 30
                    },
                    "release": {
                        "type": "integer",
                        "nullable": true
                    },
                    "onSpot": {
                        "type": "boolean",
                        "nullable": true
                    },
                    "subtractDays": {
                        "type": "integer",
                        "nullable": true
                    },
                    "numberOfPersons": {
                        "type": "integer",
                        "nullable": true
                    },
                    "paymentType": {
                        "type": "string",
                        "enum": [
                            "perPersonPerDay",
                            "perPerson",
                            "Once",
                            "perUnitPerWeek",
                            "perHour"
                        ],
                        "example": "perDay"
                    },
                    "definitionId": {
                        "type": "integer",
                        "example": 1
                    },
                    "type": {
                        "type": "string",
                        "example": "baseRate"
                    },
                    "title": {
                        "type": "string",
                        "example": "Overnight"
                    }
                }
            },
            "CommonItems": {
                "type": "object",
                "properties": {
                    "supplement": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/PricelistItem"
                        }
                    },
                    "discount": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/PricelistItem"
                        }
                    },
                    "touristTax": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/PricelistItem"
                        }
                    }
                }
            }
        }
    }
}